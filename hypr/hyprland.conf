source=~/dotfiles/hypr/local_config.conf

# Force all electron apps to use wayland
env = ELECTRON_OZONE_PLATFORM_HINT, wayland

# AUTOSTART
exec-once = nm-applet
exec-once = hyprpaper
exec-once = hypridle
exec-once = ulauncher --hide-window --no-window-shadow
exec-once = wlsunset -l$WLSUNSET_LAT -L$WLSUNSET_LON -t 2500 -T 6500
exec-once = pkill mako; swaync
exec-once = swayidle -w timeout 1200 hyprlock
exec-once = [workspace special:magic silent] spotify 
exec-once = ~/dotfiles/waybar/hypr_listener.sh &

# APPEARANCE
general { 
    gaps_in = 0
    gaps_out = 0
    border_size = 2
    col.active_border = rgb(162,161,161) 
    col.inactive_border = rgb(0,0,0)
    resize_on_border = false
    allow_tearing = false
    layout = dwindle
}

decoration {
    rounding = 0
    active_opacity = 1.0
    inactive_opacity = 1.0
        blur {
        enabled = false
        size = 2
        passes = 1
        new_optimizations = yes
        ignore_opacity = true
    }
}

animations {
    enabled = true
    bezier = gentle, 0.1, 0.8, 0.1, 1.0
    bezier = bouncy, 0.05, 0.9, 0.1, 1.1
    bezier = snap, 0.0, 1.0, 0.0, 1.0    

    animation = windows, 1, 1.5, gentle
    animation = windowsOut, 1, 1.5, gentle
    animation = fade, 1, 2, gentle
    animation = workspaces, 1, 2, snap
    animation = specialWorkspace, 1, 3, gentle, slidefade 0%
    animation = border, 1, 2, gentle
}

## This block disables borders when only one window is open
workspace = w[tv1], gapsout:0, gapsin:0
workspace = f[1], gapsout:0, gapsin:0
windowrule = bordersize 0, floating:0, onworkspace:w[tv1]
windowrule = rounding 0, floating:0, onworkspace:w[tv1]
windowrule = bordersize 0, floating:0, onworkspace:f[1]
windowrule = rounding 0, floating:0, onworkspace:f[1]

## Disables border for ulauncher
windowrule = noborder, class:^(ulauncher)$

dwindle {
    pseudotile = true
    preserve_split = true
}

misc { 
    force_default_wallpaper = 0
    disable_hyprland_logo = true
    mouse_move_enables_dpms = true
    key_press_enables_dpms = true
}

# KEYBINDINGS
$mainMod = ALT
$browser = uwsm app -- brave --new-window
$webapp = $browser --app

## Programs
bind = $mainMod, RETURN, exec, kitty
bind = $mainMod, N, exec, kitty nvim
bind = $mainMod, B, exec, brave
bind = $mainMod, SPACE, exec, ulauncher-toggle
bind = $mainMod, Escape, exec, hyprlock

## Web Apps
bind = $mainMod, I, exec, $webapp="https://chatgpt.com"
bind = $mainMod, T, exec, $webapp="https://app.todoist.com/app/inbox"

## System Functions
bind = ,Print, exec, grim -g "$" - | wl-copy 
bind = $mainMod, C, killactive,
bind = $mainMod, M, exit,
bind = $mainMod, V, togglefloating,
bind = $mainMod, F, fullscreen
bind = $mainMod, R, exec, hyprctl reload
bind = $mainMod SHIFT, N, exec, swaync-client -t

## Window Navigation/Management
bind = $mainMod, H, movefocus, l
bind = $mainMod, L, movefocus, r
bind = $mainMod, K, movefocus, u
bind = $mainMod, J, movefocus, d
bind = $mainMod, S, togglespecialworkspace, magic
bind = $mainMod SHIFT, S, movetoworkspace, special:magic

$resize_value = 80
bind = $mainMod, R, submap, resize
submap = resize
binde = , L, resizeactive, $resize_value 0
binde = , H, resizeactive, -$resize_value 0
binde = , K, resizeactive, 0 -$resize_value
binde = , J, resizeactive, 0 $resize_value
bind = , escape, submap, reset
submap = reset

bind = $mainMod SHIFT, H, movewindow, l
bind = $mainMod SHIFT, L, movewindow, r
bind = $mainMod SHIFT, K, movewindow, u
bind = $mainMod SHIFT, J, movewindow, d

bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10

bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10

bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

## Media/System Controls
bindel = ,XF86AudioRaiseVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+
bindel = ,XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindel = ,XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle

bind = , XF86AudioPlay, exec, playerctl play-pause
bind = , XF86AudioNext, exec, playerctl next
bind = , XF86AudioPrev, exec, playerctl previous
bind = , XF86AudioStop, exec, playerctl stop
